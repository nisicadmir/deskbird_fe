<div class="user-list-container">
  <p-toast></p-toast>
  <!-- Added for displaying toast notifications -->
  <div class="header">
    <p-toolbar>
      <div class="p-toolbar-group-left">
        <h1>User List</h1>
        <p-button
          *ngIf="meData | isAdmin"
          label="Create User"
          (onClick)="createUser()"
          styleClass="p-button-primary"
        ></p-button>
      </div>
      <div class="p-toolbar-group-right">
        <span class="welcome-message"
          >Welcome, {{ meData.fullName }} ({{ meData.email }})</span
        >
        <p-button
          label="Logout"
          (onClick)="logout()"
          styleClass="p-button-secondary"
        ></p-button>
      </div>
    </p-toolbar>
  </div>
  <div class="data">
    <p-table [value]="users">
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Full Name</th>
          <th>Email</th>
          <th>Role</th>
          <th>Created At</th>
          <th>Updated At</th>
          <th *ngIf="meData | isAdmin">Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user>
        <tr>
          <td>{{ user.id }}</td>
          <td>{{ user.fullName }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.role }}</td>
          <td>{{ user.createdAt | date }}</td>
          <td>{{ user.updatedAt | date }}</td>
          <td *ngIf="meData | isAdmin">
            <p-button
              label="Edit"
              severity="primary"
              size="small"
              (onClick)="editUser(user)"
            ></p-button>
            <p-button
              label="Delete"
              severity="danger"
              size="small"
              (onClick)="deleteUser(user.id)"
            ></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
